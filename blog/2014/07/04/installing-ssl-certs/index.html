<!DOCTYPE html><html lang="en"><head>
  <title>Installing SSL Certs...</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="Description" content="This is the site description"/>
  <meta name="theme-color" content="#565797"/>
<style>code{padding:0 var(--inline-code-padding);border-radius:var(--inline-code-padding);font-family:var(--code-font-family);background:var(--dark-grey);color:var(--white)}</style><style>h1{font-weight:400;font-size:2rem}</style><style>pre{overflow-x:auto}</style><style>pre{background-color:var(--dark-grey);padding:var(--pre-padding);border-radius:var(--pre-padding);overflow-x:auto;box-shadow:0 2px 8px var(--drop-shadow)}pre code{padding:0;background:unset}</style><style>:root{--body-font-family:"Roboto",sans-serif;--code-font-family:"dm",monospace;--default-font-size:18px;--table-cell-padding:8px;--page-padding:24px;--header-padding:64px;--footer-padding:64px;--inline-code-padding:4px;--pre-padding:4px;--page-max-width:800px;--white:#f5f6fa;--dark-grey:#2f3640}html{height:100%;font-size:18px;font-size:var(--default-font-size)}</style><style>.l-default{display:flex;flex-direction:column;min-height:100%}.l-default__main{max-width:var(--page-max-width);margin:0 auto;flex:1;padding:var(--page-padding)}</style><style>p{word-wrap:break-word}</style><style>a{color:inherit}</style><style>.c-footer{display:flex;flex-direction:row;justify-content:center}.c-footer__content{padding:var(--footer-padding)}.c-footer a{text-decoration:none}</style><style>.c-header{color:var(--platnum);padding:var(--header-padding) var(--page-padding);background:var(--dark-grey)}.c-header__logo svg{width:124px;height:124px;margin:auto}.c-header__logo svg path{fill:var(--white)}</style><style>h2{font-weight:400;font-size:1.7rem}</style><style>img{max-width:100%;height:auto}</style><style>svg{display:block}</style><style>@import url("https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap");body{display:inline;min-height:100%;font-family:var(--body-font-family);background:var(--white);color:var(--dark-grey);margin:0}</style></head><body>
<div class="l-default">
  <header class="c-header">
  <a href="/" class="c-header__logo">
    <svg width="1024" height="1024" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M988 36H36V987H988V36ZM0 0V1023H1024V0H0Z" fill="black"></path>
<path d="M834.787 519.358H767.661V590H746.567V430.039H845.664V447.397H767.661V502.109H834.787V519.358Z" fill="black"></path>
<path d="M574.089 447.397H522.673V590H501.689V447.397H450.383V430.039H574.089V447.397Z" fill="black"></path>
<path d="M834.984 821.062H765.661V877.751H846.19V895H744.567V735.039H845.092V752.397H765.661V803.813H834.984V821.062Z" fill="black"></path>
<path d="M575.23 844.243C573.253 861.162 566.991 874.236 556.444 883.464C545.97 892.62 532.018 897.197 514.586 897.197C495.689 897.197 480.528 890.422 469.103 876.873C457.75 863.323 452.074 845.195 452.074 822.49V807.109C452.074 792.241 454.71 779.167 459.984 767.888C465.331 756.609 472.875 747.966 482.616 741.96C492.357 735.881 503.636 732.842 516.454 732.842C533.446 732.842 547.069 737.603 557.323 747.124C567.577 756.572 573.546 769.683 575.23 786.455H554.027C552.196 773.711 548.204 764.482 542.052 758.77C535.973 753.057 527.44 750.2 516.454 750.2C502.977 750.2 492.394 755.181 484.703 765.142C477.086 775.103 473.277 789.275 473.277 807.659V823.149C473.277 840.508 476.903 854.314 484.154 864.568C491.405 874.822 501.549 879.949 514.586 879.949C526.305 879.949 535.277 877.312 541.502 872.039C547.801 866.692 551.976 857.427 554.027 844.243H575.23Z" fill="black"></path>
<path d="M266.397 853.252H199.38L184.329 895H162.576L223.66 735.039H242.117L303.311 895H281.668L266.397 853.252ZM205.752 835.894H260.135L232.889 761.077L205.752 835.894Z" fill="black"></path>
<path d="M294.004 590H272.8L192.271 466.733V590H171.067V430.039H192.271L273.02 553.855V430.039H294.004V590Z" fill="black"></path>
<path d="M848.177 122.039V230.804C848.104 245.892 843.343 258.233 833.895 267.828C824.52 277.422 811.775 282.806 795.662 283.978L790.059 284.197C772.554 284.197 758.602 279.473 748.201 270.025C737.801 260.577 732.527 247.576 732.381 231.023V122.039H753.255V230.364C753.255 241.937 756.441 250.945 762.813 257.391C769.185 263.763 778.267 266.949 790.059 266.949C801.998 266.949 811.116 263.763 817.415 257.391C823.787 251.019 826.973 242.046 826.973 230.474V122.039H848.177Z" fill="black"></path>
<path d="M545.897 240.252H478.88L463.829 282H442.076L503.16 122.039H521.617L582.811 282H561.168L545.897 240.252ZM485.252 222.894H539.635L512.389 148.077L485.252 222.894Z" fill="black"></path>
<path d="M292.17 261.016C286.75 268.78 279.169 274.603 269.428 278.484C259.76 282.293 248.481 284.197 235.59 284.197C222.553 284.197 210.981 281.158 200.874 275.079C190.766 268.926 182.929 260.21 177.363 248.931C171.87 237.652 169.05 224.578 168.903 209.71V195.757C168.903 171.661 174.506 152.984 185.712 139.727C196.992 126.47 212.812 119.842 233.173 119.842C249.873 119.842 263.312 124.126 273.493 132.696C283.674 141.192 289.899 153.277 292.17 168.951H271.076C267.121 147.784 254.523 137.2 233.283 137.2C219.147 137.2 208.417 142.181 201.093 152.142C193.842 162.029 190.18 176.385 190.107 195.208V208.282C190.107 226.226 194.208 240.508 202.412 251.128C210.615 261.675 221.711 266.949 235.7 266.949C243.61 266.949 250.532 266.07 256.464 264.312C262.397 262.554 267.304 259.588 271.186 255.413V219.488H234.162V202.349H292.17V261.016Z" fill="black"></path>
</svg>

  </a>
</header>
  <main class="l-default__main">
<p><img src="/images/blog/2014/07/04/nsa-smiley-face-fb.jpg" alt="Key art for blog post “Installing SSL Certs… “"/></p>
<h1 id="installing-ssl-certs">Installing SSL Certs…</h1>
<p>The SSL cert is going to come from <a href="http://startssl.com">startssl.com</a> since they are free and a recommendation from <a href="https://mikewest.org/">Mike West</a> is more than good enough for me.</p>
<h1 id="getting-the-certificates">Getting the Certificates</h1>
<p>To get an account you have to go through a bit of a dance to get some “login” certificates from <a href="http://startssl.com">StartSSL</a> to install on your system.</p>
<p>Next time you visit the site, <a href="http://startssl.com">StartSSL</a> will access these certificates and use them to validate who you are, at least there are no usernames or passwords. It&#39;s relatively straight forward when you are going through it. <strong>Just make sure you back up the certificates for signing in</strong>.</p>
<p>Once you&#39;re registered, the first step is to go through the <em>Validations Wizard</em> and select <em>Domain Name Validation</em> and prove you own the domain. For this you <strong>need</strong> to have access to a certain set of email addresses which <a href="http://startssl.com">StartSSL</a> will e-mail with a verification code, i.e. <a href="mailto:webmaster@mydomainname.com">webmaster@mydomainname.com</a>.</p>
<p>Since I&#39;ve only just bought and set-up gauntface.com to point at my Compute Engine instance, I had to add gauntface.com to my Google Apps account and set up an e-mail addresses to get the verification code.</p>
<p>With that done, I walked through the <em>Certificates Wizard</em> for type <em>Web Server SSL/TLS Certificate</em>. When you&#39;re going through it you&#39;re given the private key, named <em>ssl.key</em>, then I had to wait about an hour after finishing the set-up before getting an e-mail to let me know I could sign-in and grab my signed public certificate.</p>
<p>In I went and grabbed my signed public SSL cert, saving it as <em>ssl.crt</em>, then came the deployment stage.</p>
<h1 id="deploying-to-nginx">Deploying to Nginx</h1>
<p>Initially I followed the StartSSL guide for setting everything up on Nginx <a href="https://www.startssl.com/?app=42">https://www.startssl.com/?app=42</a>, the only difference is that I stashed the certificates somewhere different on the system and pointed the nginx.conf to that directory.</p>
<p>Since I&#39;m on Compute Engine I needed to enable HTTPS traffic on the VM instance&#39;s firewall, depending on your set-up you may need to do the same. With that switched on I started to see my site load up.</p>
<p>The padlock was visible - Wahey!!</p>
<p><img src="/images/blog/2014/07/04/ssl-on-gauntface.png" alt="The SSL Padlock on Gauntface.com" title="284"/></p>
<p>At first I had a rogue Google Font which was loaded over http, a quick CSS change…</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">url</span><span style="color:#f92672">(</span><span style="color:#f92672">/</span><span style="color:#f92672">/</span><span style="color:#f92672">themes</span>.<span style="color:#a6e22e">googleusercontent</span>.<span style="color:#a6e22e">com</span><span style="color:#f92672">/</span><span style="color:#f92672">static</span><span style="color:#f92672">/</span><span style="color:#f92672">fonts</span><span style="color:#f92672">/</span><span style="color:#f92672">opensans</span><span style="color:#f92672">/</span><span style="color:#f92672">v8</span><span style="color:#f92672">/</span><span style="color:#f92672">DXI1ORHCpsQm3Vp6mXoaTaRDOzjiPcYnFooOUGCOsRk</span>.<span style="color:#a6e22e">woff</span><span style="color:#f92672">)</span>
</code></pre></div><p>…and we&#39;re good to go.</p>
<p>The ‘//’ means - use the current protocol for this URL - i.e. use HTTPS:// if the current domain is using HTTPS.</p>
<p>My <a href="http://wiki.nginx.org/Main">Nginx</a> config ended up redirecting HTTP traffic to HTTPS automatically once I deployed it. This was by accident and chances are I breaked it in the future if I changed anything, so I added the following to my Nginx config file to handle HTTP traffic.</p>
<pre><code># Redirect http://gauntface.com to https://gauntface.com
server {
    listen       80;
    server_name gauntface.com;
    return 301 &#34;https://gauntface.com${uri}&#34;;
}
</code></pre><p>I ended up having two instances loaded against my Load Balancer, which I hadn&#39;t realised. This lead to occasional 404&#39;s on my site since one instance wasn&#39;t being maintained and only supported HTTP. Once I killed the second instance, everything was up and running just fine.</p>
<h1 id="hsts">HSTS</h1>
<p>After landing SSL I was somewhat upset that by default Chrome will look for the HTTP version of the site rather than HTTPS, meaning the user gets hit by a redirect. However, <a href="https://www.igvita.com/">Ilya Grigorik</a> pointed out that HSTS solves this by telling the browser to ONLY use HTTPS until an expiration timeout is passed.</p>
<p>A quick google landed me on this site <a href="https://scotthelme.co.uk/setting-up-hsts-in-nginx/">https://scotthelme.co.uk/setting-up-hsts-in-nginx/</a> which gave me the following line to add to the <em>server</em> element in my <a href="http://wiki.nginx.org/Main">Nginx</a> config.</p>
<pre><code># HSTS Header for SSL
add_header Strict-Transport-Security &#34;max-age=31536000; includeSubdomains&#34;;
</code></pre><p>This is basically telling a compliant browser to only use HTTPS for a year and include sub domains as well.</p>
<h1 id="ssllabs">SSLLabs</h1>
<p>After setting up the HSTS header, I started to read through the <a href="http://www.html5rocks.com/en/tutorials/security/transport-layer-security/">HTML5Rocks Article on SSL</a> and in the links it points to <a href="https://www.ssllabs.com/">SSLLabs</a> for their <a href="https://www.ssllabs.com/ssltest/index.html">SSL Test</a>.</p>
<p><img src="/images/blog/2014/07/08/ssl-labs.jpg" alt="SSLLabs A- Test Score for Gauntface.com" title="800"/></p>
<p>The main issue was with “Forward Secrecy”, after reading into it a little bit I&#39;d describe “Forward Secrecy” in the following way:</p>
<p>Think of RSA encryption as a way of using the private key to encrypt data, meaning that if you were a third party, hoping to decrypt messages, you&#39;d just need to obtain the private key and you are good to go.</p>
<p>Meaning you <em>could</em> stash all the encrypted data and eventually, one day in the future, get the private key somehow and use it to decrypt all the stashed data.</p>
<p>Forward Secrecy uses session keys agreed by both parties to encrypt and decrypt data, destroying those keys once you&#39;re done, making it much harder to snoop.</p>
<p>To get this working I grabbed some <em>more</em> Nginx config from an <a href="https://community.qualys.com/blogs/securitylabs/2013/08/05/configuring-apache-nginx-and-openssl-for-forward-secrecy">SSLLabs blog post</a>.</p>
<pre><code>ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
ssl_prefer_server_ciphers on;
ssl_ciphers &#34;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS&#34;;
</code></pre><p>With this in place, I got my new test score.</p>
<p><img src="/images/blog/2014/07/08/ssl-lab-a-plus.jpg" alt="SSLLabs A+ Test Score for Gauntface.com" title="800"/></p>
<p>Now this version actually works.</p>
<p>However after talking some more with Ilya, he pointed out that I should be using <a href="https://wiki.mozilla.org/Security/Server_Side_TLS">Mozilla&#39;s Wiki for up to date best practices</a>, which had a different recommendation for the SSL Ciphers.</p>
<p>Being the fool that I am, I took the non-backward compatible list of ciphersuite, and made it look similar to the list from SSLLabs.</p>
<p>As far as the browser and SSLLabs were concerned, this was fine and I even got 100/100 for the protocol score.</p>
<p>Woop Woop.</p>
<p><img src="/images/blog/2014/07/15/ssl-labs-mozilla-wiki-config.jpg" alt="SSLLabs Test Score after using some of the Mozilla Wiki Nginx Config Recommendations" title="800"/></p>
<p>However, Google had issues on WebMaster Tools and PageSpeed Insights when it came to crawling my site and curl failed to get the contents of my site :-S</p>
<p>If I switched to the original ciphers list from the <a href="https://wiki.mozilla.org/Security/Server_Side_TLS">Mozilla Wiki</a>, I fix the issues for curl and the Google bot.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Recommended Cipher Suites from Mozilla Wiki</span>
ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
ssl_prefer_server_ciphers on;
ssl_ciphers <span style="color:#e6db74">&#39;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!3DES:!MD5:!PSK&#39;</span>;
</code></pre></div><p>This then bumps my score for protocols back down to 90…..not a <a href="http://www.cockneyrhymingslang.co.uk/slang/scooby_doo_1">scooby doo</a> as to why.</p>
<h2 id="ssl_protocols">ssl_protocols</h2>
<p>In the Mozilla Wiki, it recommends the use of SSLv3, there are apparently vulnerabilities with this, so I&#39;ve dropped its support since SSLv3 support in a browser hopefully includes TLSv1 support.</p>
<pre><code># Recommended Cipher Suite from Mozilla Wiki
ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
ssl_prefer_server_ciphers on;
ssl_ciphers &#39;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!3DES:!MD5:!PSK&#39;;
</code></pre><p>#Keep Alive</p>
<p>Most articles on SSL performance will include a reference to Keep Alive to send multiple requests on a single connection.</p>
<pre><code>keepalive_timeout   70;
</code></pre><h2 id="ssl-dhparam">SSL DHParam</h2>
<p>The <em>ssl_dhparam</em> is a key used for forward secrecy (yes more forward secrecy stuff).</p>
<p>To the best of my understanding the ssl_dhparam creates a prime number which can be used with Diffie Hellman key exchanges and improves the security of the encryption.</p>
<p>The key is generated with the following command.</p>
<pre><code>openssl dhparam 2048 -out ssl-dh.pem
</code></pre><p>The 2048 parameter is the bit length of the prime number generated and used in the Diffie-Hellman key exchange. The longer the prime, the better the security, although I imagine this would have a performance cost tied to it. The recommendation in Mozilla&#39;s Wiki is 2048, so I&#39;ve stuck with that.</p>
<h2 id="ssl-session-timeout-and-session-cache-aka-resumption">SSL Session Timeout and Session Cache (a.k.a. Resumption)</h2>
<p>In the Nginx docs, the ssl_session_cache and ssl_session_timeout are paired closely.</p>
<p>Mozilla defines a 5m SSL session timeout, which happens to be the default value for Nginx, but no harm in defining it explicitly.</p>
<p>The SSL Session cache seems to be a way of taking an SSL handshake and share it amongst several connections with a client, avoiding handling handshakes for requests made in parallel.</p>
<p>The timeout will then keep this sessions alive for 5 minutes since their last use.</p>
<h2 id="ocsp-stapling">OCSP Stapling</h2>
<p>Warning: A broken understanding + explanation incoming.</p>
<p>When a browser requests a site&#39;s SSL Certificate, it needs to check the validity of the certificate by ensuring it&#39;s not on a Certificate Revocation List (CRL).</p>
<p>The problem with CRL&#39;s is that they can take some time for a browser to download the entire list and perform the check. This is where OCSP steps in.</p>
<p>OCSP is a record which covers one certificate, meaning the browser can ask for the single record it cares about.</p>
<p>The problem with OCSP is that the service is run by a third party, which means it can fall over or be slow to respond to requests. To get around this you can set up your server to cache the OCSP record and respond to OCSP requests during the TLS Handshake.</p>
<p>To add OCSP support with a StartSSL Certificate, I added the following to my config:</p>
<pre><code># OCSP Stapling
# Using Googles Public DNS 8.8.8.8
ssl_stapling on;
ssl_stapling_verify on;
ssl_trusted_certificate /&lt;Path to Trusted Certs&gt;/ssl-trusted.crt;
resolver 8.8.8.8;
</code></pre><p>For the <em>resolver</em> I&#39;m using Google&#39;s public DNS (I&#39;m not aware of any other DNS - not really my thang’) and for the <em>ssl_trusted_certificate</em> I am using a file made up of the sub.class1.server.ca.pem and ca.pem provided by StartSSL, simply concatenating them together.</p>
<pre><code>sudo cat /etc/ssl/sub.class1.server.ca.pem /etc/ssl/ca.pem &gt; /etc/ssl/ssl-trusted.crt
</code></pre><p>You can confirm it&#39;s on by running the SSLLabs test again and looking in the “OCSP stapling” check.</p>
<p><img src="/images/blog/2014/07/15/ssllabs-ocsp-test.jpg" alt="SSLLabs test showing OCSP is working" title="800"/></p>
<h1 id="the-final-nginx-config">The Final Nginx Config</h1>
<p>The final parts of the config relating to SSL looks like the following:</p>
<pre><code>server {
    listen       443;
    server_name gauntface.com;
    keepalive_timeout   70;

    # Turn on SSL
    ssl on;
    ssl_certificate     /&lt;Path to Cert&gt;/ssl-unified.crt;
    ssl_certificate_key /&lt;Path to Key&gt;/ssl.key;

    # Diffie-Hellman parameter for DHE ciphersuites, recommended 2048 bits
    ssl_dhparam /&lt;Path to DH Pem&gt;/ssl-dh.pem;
    ssl_session_timeout 5m;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers &#39;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!3DES:!MD5:!PSK&#39;;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:50m;

    # OCSP Stapling ---
    # fetch OCSP records from URL in ssl_certificate and cache them
    # Using Googles Public DNS 8.8.8.8
    ssl_stapling on;
    ssl_stapling_verify on;
    ## verify chain of trust of OCSP response using Root CA and Intermediate certs
    ssl_trusted_certificate /&lt;Path to Cert&gt;/ssl-trusted.crt;
    resolver 8.8.8.8;

    # HSTS Header for SSL
    # add_header Strict-Transport-Security &#34;max-age=31536000; includeSubdomains&#34;;
    add_header Strict-Transport-Security &#34;max-age=31536000;&#34;;

    ....
}

# Redirect http://gauntface.com to https://gauntface.com
server {
    listen       80;
    server_name gauntface.com;
    return 301 &#34;https://gauntface.com${uri}&#34;;
}
</code></pre><h1 id="spdy-support">SPDY Support</h1>
<p>A lot of the guides on line suggest that SPDY can be used with Nginx but since it&#39;s a non-stable module, Nginx needs to be built with a flag to include the module (see: <a href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html">http://nginx.org/en/docs/http/ngx_http_spdy_module.html</a>.</p>
<p>My server is running Backports Debian Wheezy and installing Nginx from the projects repos (see here for more details: <a href="http://wiki.nginx.org/Install">http://wiki.nginx.org/Install</a>.</p>
<p>This version of Nginx actually came with the SPDY module enabled, so adding support was a case of extending the <em>listen</em> parameters in the config file.</p>
<pre><code>server {
    listen       443 ssl spdy;
</code></pre><p>To check it was working I just used <a href="http://spdycheck.org/">http://spdycheck.org/</a>.</p>
<p><img src="/images/blog/2014/07/16/spdycheck-results-gauntface.jpg" alt="SPDYCheck.org Results for gauntface.com" title="800"/></p>
<p>Big thanks to:</p>
<ul>
<li><a href="https://plus.google.com/+IanBarber/">Ian Barber</a> for all help in getting this sorted and bug spotting / fixing.</li>
<li><a href="https://www.igvita.com/">Ilya Grigorik</a> for pointing out improvements and things I hadn&#39;t spotted.</li>
</ul>

</main>
<footer class="c-footer">
  <div class="c-footer__content">
    <a href="://twiter.com/gauntface">Twitter</a> | <a href="://github.com/gauntface">GitHub</a> | <a href="://www.linkedin.com/in/mattgaunt/">LinkedIn</a>
  </div>
</footer>
</div>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-155219449-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-155219449-1');
</script>

<script>var haCSS = haCSS || []; haCSS.push(...['/css/elements/code-async.css']);</script></body></html>